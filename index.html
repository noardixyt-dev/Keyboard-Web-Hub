<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AULA | Dream Rhythm</title>
    <style>
        :root {
            --pink: #ffb7ce;
            --blue: #a2d2ff;
            --glass: rgba(255, 255, 255, 0.1);
            --border: rgba(255, 255, 255, 0.2);
        }

        body {
            margin: 0; padding: 0; height: 100vh;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            background: linear-gradient(135deg, #1c1c2b 0%, #3e2f4d 50%, #2b1c2b 100%);
            font-family: 'Segoe UI', sans-serif;
            color: white; overflow: hidden;
        }

        /* Matte Glass Interface */
        .game-panel {
            background: var(--glass);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border: 1px solid var(--border);
            border-radius: 40px;
            padding: 50px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
            width: 500px;
            position: relative;
        }

        .visualizer {
            display: flex; justify-content: center; gap: 15px; margin: 40px 0; height: 60px;
        }

        .beat-dot {
            width: 20px; height: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            transition: 0.2s;
        }

        .beat-dot.active-call { background: var(--pink); transform: scale(1.5); box-shadow: 0 0 20px var(--pink); }
        .beat-dot.active-response { background: var(--blue); transform: scale(1.5); box-shadow: 0 0 20px var(--blue); }

        .phase-label {
            font-size: 24px; font-weight: 200; letter-spacing: 5px; text-transform: uppercase;
            margin-bottom: 10px; height: 30px;
        }

        #feedback {
            font-size: 18px; color: var(--blue); height: 20px; margin-top: 20px; font-weight: bold;
        }

        .btn-start {
            background: white; color: #1c1c2b; border: none; padding: 15px 40px;
            border-radius: 50px; cursor: pointer; font-weight: bold; font-size: 16px;
            transition: 0.3s;
        }
        .btn-start:hover { transform: scale(1.05); box-shadow: 0 0 20px rgba(255,255,255,0.4); }

        /* Floating background elements */
        .bubble {
            position: absolute; width: 200px; height: 200px;
            background: var(--pink); filter: blur(80px); opacity: 0.2; z-index: -1;
            animation: float 10s infinite alternate;
        }
    </style>
</head>
<body>

    <div class="bubble" style="top: 10%; left: 10%;"></div>
    <div class="bubble" style="bottom: 10%; right: 10%; background: var(--blue);"></div>

    <div class="game-panel">
        <div class="phase-label" id="phase">Ready?</div>
        
        <div class="visualizer" id="dots">
            <div class="beat-dot"></div>
            <div class="beat-dot"></div>
            <div class="beat-dot"></div>
            <div class="beat-dot"></div>
        </div>

        <button class="btn-start" id="startBtn">START SEQUENCE</button>
        <div id="feedback"></div>
        
        <p style="margin-top: 30px; font-size: 12px; opacity: 0.5;">LISTEN TO THE PINK DOTS, THEN PRESS SPACE ON THE BLUE ONES</p>
    </div>

<script>
    const dots = document.querySelectorAll('.beat-dot');
    const phaseLabel = document.getElementById('phase');
    const startBtn = document.getElementById('startBtn');
    const feedback = document.getElementById('feedback');
    
    let sequence = [true, false, true, true]; // The "Call" (pattern)
    let userSequence = [];
    let isListening = false;
    const bpm = 500; // Speed of beats

    async function playSequence() {
        startBtn.style.display = 'none';
        feedback.innerText = "";
        
        // 1. THE CALL
        phaseLabel.innerText = "Listen...";
        for(let i=0; i < sequence.length; i++) {
            await wait(bpm);
            if(sequence[i]) {
                dots[i].classList.add('active-call');
                // Imagine a soft lo-fi kick sound here
                setTimeout(() => dots[i].classList.remove('active-call'), 200);
            }
        }

        await wait(bpm);

        // 2. THE RESPONSE
        phaseLabel.innerText = "Your Turn!";
        phaseLabel.style.color = "var(--blue)";
        isListening = true;
        userSequence = [];

        for(let i=0; i < sequence.length; i++) {
            dots[i].classList.add('active-response');
            let startTime = Date.now();
            let hit = false;

            // Wait for user to press Space during this dot's window
            while(Date.now() - startTime < bpm) {
                if(keyPressed) {
                    hit = true;
                    keyPressed = false;
                }
                await wait(10);
            }
            
            userSequence.push(hit);
            dots[i].classList.remove('active-response');
        }

        checkResult();
    }

    let keyPressed = false;
    window.addEventListener('keydown', (e) => {
        if(e.code === 'Space' && isListening) {
            keyPressed = true;
            // Visual tap feedback
            feedback.innerText = "TAP!";
        }
    });

    function checkResult() {
        isListening = false;
        phaseLabel.style.color = "white";
        const correct = JSON.stringify(sequence) === JSON.stringify(userSequence);
        
        if(correct) {
            phaseLabel.innerText = "Perfect Harmony";
            feedback.innerText = "✨ Clean Rhythm ✨";
        } else {
            phaseLabel.innerText = "Out of Sync";
            feedback.innerText = "Try again...";
        }
        
        startBtn.style.display = 'inline-block';
        startBtn.innerText = "RETRY";
        // Generate a new random sequence for next time
        sequence = Array.from({length: 4}, () => Math.random() > 0.4);
    }

    function wait(ms) { return new Promise(res => setTimeout(res, ms)); }
    startBtn.onclick = playSequence;

</script>
</body>
</html>
